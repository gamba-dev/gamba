---

title: Auer 2021


keywords: fastai
sidebar: home_sidebar

summary: "Partial Replication on dummy data"
description: "Partial Replication on dummy data"
nb_path: "37_auer2021.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: 37_auer2021.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>This notebook describes the analysis of behavioural player data performed in the 2021 study by Auer &amp; Griffiths titled <a href="https://link.springer.com/article/10.1007/s11469-020-00442-6">Reasons for Gambling and Problem Gambling Among Norwegian Horse Bettors: A Real-World Study Utilizing Combining Survey Data and Behavioural Player Data</a>. Whilst the data for the study has not been made available, the analytical method used is well defined, so is implemented here using the gamba library on some alternative data.</p>
<p>Note that this study looks at both transaction data and survey data. As the gamba library focusses on transaction analysis only this part of the paper will be replicated here, specifically <a href="https://link.springer.com/article/10.1007/s11469-020-00442-6/tables/4">table 4 in the paper</a>.</p>
<p>As always, the first step is to import the gamba library;</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">gamba</span> <span class="k">as</span> <span class="nn">gb</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Next, we load in the data set - as mentioned above this data is not the same as that used in the study. If it becomes available it will be substituted here, but for now, a chunk of the cryptocurrency transaction set <a href="https://osf.io/8bfyj/">available here</a> can be used as a placeholder.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">player_bets</span> <span class="o">=</span> <span class="n">gb</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;/home/ojs/Data/osf_data/raw_data_part_4.csv&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;bet_time&#39;</span><span class="p">,</span><span class="s1">&#39;payout_time&#39;</span><span class="p">,</span><span class="s1">&#39;duration&#39;</span><span class="p">])</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The second parameter in the <code>read_csv</code> method is any variables in the data which are datetime values (see Pandas read_csv for details). With the player bets loaded, the next step is to create a measures table, which can be done using the <code>create_measures_table</code> method from the measures module. As this paper uses horse race betting data, there are some variables which are context specific (online only and horseraces only). See the table below for the measures described in the paper, and the names of those computed in this notebook in their place.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<table>
<thead><tr>
<th>In-Paper Text Description</th>
<th>Measures Module Method</th>
</tr>
</thead>
<tbody>
<tr>
<td>amount of money bet</td>
<td><code>total_wagered</code></td>
</tr>
<tr>
<td>amount of money bet online</td>
<td>n/a (context specific derivative of <code>total_wagered</code>)</td>
</tr>
<tr>
<td>amount of money bet on Norwegian horseraces</td>
<td>n/a (context specific derivative of <code>total_wagered</code>)</td>
</tr>
<tr>
<td>amount of money won</td>
<td><code>net_loss</code> (functionally identical)</td>
</tr>
<tr>
<td>number of playing days</td>
<td><code>frequency_raw</code></td>
</tr>
<tr>
<td>number of games played</td>
<td><code>number_of_bets</code> (table in paper uses 'number of tickets')</td>
</tr>
<tr>
<td>bet conscious play</td>
<td>n/a (context specific derivative of <code>total_wagered</code>)</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>To create the measures table, the measures used can be defined as a list of names of methods in the measures module. This is then passed to the <code>create_measures_table</code> method which computes them across the player bets.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">measures_used</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;total_wagered&#39;</span><span class="p">,</span><span class="s1">&#39;net_loss&#39;</span><span class="p">,</span><span class="s1">&#39;frequency_raw&#39;</span><span class="p">,</span><span class="s1">&#39;number_of_bets&#39;</span><span class="p">]</span>
<span class="n">measures_table</span> <span class="o">=</span> <span class="n">gb</span><span class="o">.</span><span class="n">measures</span><span class="o">.</span><span class="n">create_measures_table</span><span class="p">(</span><span class="n">player_bets</span><span class="p">,</span> <span class="n">measures_used</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The final step of this replication is to compute spearman correlations between each of the behavioural measures computed. As this replication only concerns the transaction data component of the study, it's much smaller than the original but can be expanded with the data by adding to the measures table.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">spearman_coefficient_table</span> <span class="o">=</span> <span class="n">gb</span><span class="o">.</span><span class="n">statistics</span><span class="o">.</span><span class="n">spearmans_r</span><span class="p">(</span><span class="n">measures_table</span><span class="p">)</span>
<span class="n">display</span><span class="p">(</span><span class="n">spearman_coefficient_table</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea ">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>total_wagered</th>
      <th>net_loss</th>
      <th>frequency_raw</th>
      <th>number_of_bets</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>total_wagered</th>
      <td>-</td>
      <td></td>
      <td></td>
      <td></td>
    </tr>
    <tr>
      <th>net_loss</th>
      <td>0.17**</td>
      <td>-</td>
      <td></td>
      <td></td>
    </tr>
    <tr>
      <th>frequency_raw</th>
      <td>0.83**</td>
      <td>0.13**</td>
      <td>-</td>
      <td></td>
    </tr>
    <tr>
      <th>number_of_bets</th>
      <td>0.86**</td>
      <td>0.14**</td>
      <td>0.97**</td>
      <td>-</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>That's it! It's not a huge output given only part of the study is in the realm of transaction analysis, but it's an extendable example of how to do this kind of analysis. To learn more about extending a measures table, follow the <a href="https://gamba.dev/advanced.html">Advanced Tutorial</a>.</p>

</div>
</div>
</div>
</div>
 

